Лабораторная работа 1

1. Результат выполнения лабораторных работ — это три сценария на языке командного
интерпретатора.:
первый (основной) выполняет задание;
второй (тестовый) проверяет правильность работы основного;
третий (обнуляющий) возвращает систему в исходное состояние так, чтобы можно
было запустить процесс выполнения сценариев сначала.

2. Задача основного сценария первой лабораторной работы: создать файл my_file,
записать в него с помощью соответствующих команд:
системную дату,
текущий рабочий каталог,
имя пользователя,
название и версию ядра операционной системы.

3. Тестовый сценарий должен проверить наличие файла my_file и вывести его
содержимое.

4. Третий сценарий удаляет файл my_file или сообщает об его отсутствии.

5. Для начала работы запустите текстовый редактор nano. Наберите шебанг и первые
комментарии с описанием сценария:
>\#!/bin/sh
>\# сценарий записи системной информации в файл
>\# лабораторная работа № 1

Дальше следуют команды создания файла my_file и записи данных в него:

>touch my_file
>date > my_file
>pwd >> my_file
>who >> my_file
>uname -sr >> my_file

6. Сохраните файл, нажав ^+X (Ctrl+X).
Имя файла первого скрипта первой работы должно быть base1.sh

7. Для того, чтобы можно было запустить скрипт, необходимо сделать файл
исполняемым (наберите в командной строке, после выхода из редактора):
>chmod +x ./base1.sh

8. Попытайтесь выполнить сценарий:
>./base1.sh

9. Отобразите на экране содержимое файла my_file, выполнив:
>cat my_file

10. Вернитесь к редактированию файла base1.sh, набрав:
>nano base1.sh

11. Обратите внимание на цветное оформление сценария.
Добавьте комментарии в строках создания и записи файла:
>touch my_file
>\# создание файла
>date > my_file# запись даты и времени
>pwd >> my_file# запись текущего каталога
>who >> my_file# запись имени пользователя
>uname >> my_file# запись названия ОС

12. Сохраните изменения и закройте редактор.

13. Теперь создайте тестовый скрипт командой:
>nano test1.sh

Так же начните с шебанга и описания скрипта:

>\# ! /bin/sh
>\# сценарий проверки правильности выполнения
>\# Лабораторной работы № 1
>cat my_file # вывод на экран содержимого файла my_file
>echo $?
>\# вывод кода завершения последней операции

14. Сохраните файл и закройте редактор.

15. Настройте права для выполнения и этого сценария:
>chmod +x ./test1.sh

16. Выполните сценарий:
>./test1.sh

17. Убедитесь, что код завершения (последнее число) равен 0.
Это говорит об отсутствии ошибок при выполнении команды.

18. Скопируйте файл test1.sh в новый файл reset1.sh. Затем вызовите его на
редактирование:
>cp test1.sh
>reset1.sh
>nano reset1.sh

19. Измените комментарии и содержание редактируемого файла:
>\# ! /bin/sh
>\# сценарий очистки результатов выполнения
>\# Лабораторной работы № 1
>\# удаление файла my_file
>rm my_file && echo 'рабочий файл удалён'
>echo $?
>\# вывод кода завершения последней операции

20. Сохраните файл и завершите редактирование. Как в предыдущих случаях сделайте
файл исполняемым и запустите его:
>chmod +x ./reset1.sh
>./reset1.sh

21. Можно проверить все три файла ещё одним последовательным запуском,
а затем сверить с образцом содержание самих скриптов:
>base1.sh
>\# !/bin/sh
>\# сценарий записи системной информации в файл
>\# Лабораторная работ № 1
>touch my_file \# создание файла
>date > my_file \# запись даты и времени
>pwd >> my_file \# запись текущего каталога в файл
>who >> my_file \# запись имени в файл
>uname >> my_file \# запись названия ОС в файл
>test1.sh
>\#! /bin/sh
>\# сценарий проверки правильности выполнения
>\# Лабораторной работы № 1
>cat my_file # вывод на экран содержимого файла my_file
>echo \$?
>\# вывод кода завершения последней операции
>reset1.sh #! /bin/sh
>\# сценарий очистки результатов выполнения
>\# Лабораторной работы № 1
>rm my_file && echo 'рабочий файл удалён' \# удаление файла my_file
>echo \$?
>\# вывод на экран кода завершения последней операции

Задание 1.2

В качестве самостоятельного задания разработайте три аналогичных сценария, при этом в
файл my_hist_file должно быть записано 10 последних команд текущего сеанса работы.
